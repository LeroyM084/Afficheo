<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affichage Vidéo - Campus Emineo</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/display.css">
    <link rel="stylesheet" href="css/templates.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/template-editor.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>
<body>
    <!-- Mode d'affichage principal -->
    <div id="display-mode" class="display-container">
        <!-- Header avec horloge et météo -->
        <header class="display-header">
            <div class="header-left">
                <div class="campus-info">
                    <img src="assets/logo-emineo.png" alt="Emineo Education" class="campus-logo">
                    <span class="campus-name">Campus Bordeaux</span>
                </div>
            </div>
            
            <div class="header-center">
                <div class="current-time">
                    <span id="current-date"></span>
                    <span id="current-time"></span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="weather-info">
                    <span class="weather-temp">22°C</span>
                    <span class="weather-desc">Ensoleillé</span>
                </div>
            </div>
        </header>

        <!-- Zone principale d'affichage des annonces -->
        <main class="display-main">
            <div class="announcement-container" id="announcement-container">
                <!-- Les annonces seront injectées ici par JavaScript -->
                <div class="loading-screen">
                    <div class="loading-spinner"></div>
                    <p>Chargement des annonces...</p>
                </div>
            </div>
            
            <!-- Indicateurs de navigation -->
            <div class="navigation-indicators" id="navigation-indicators">
                <!-- Les points de navigation seront générés automatiquement -->
            </div>
        </main>

        <!-- Footer avec informations système -->
        <footer class="display-footer">
            <div class="footer-left">
                <span class="system-status">
                    <span class="status-indicator active"></span>
                    Système actif
                </span>
            </div>
            
            <div class="footer-center">
                <div class="announcement-counter">
                    <span id="current-announcement">1</span>/<span id="total-announcements">0</span>
                </div>
            </div>
            
            <div class="footer-right">
                <div class="next-announcement-info">
                    <small>Prochaine annonce dans <span id="countdown">5</span>s</small>
                </div>
            </div>
        </footer>

        <!-- Notifications d'urgence -->
        <div class="emergency-notification" id="emergency-notification" style="display: none;">
            <div class="emergency-content">
                <div class="emergency-icon">⚠️</div>
                <div class="emergency-text">
                    <h2>ANNONCE URGENTE</h2>
                    <p id="emergency-message"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Interface d'administration (cachée par défaut) -->
    <div id="admin-mode" class="admin-container" style="display: none;">
        <!-- Navigation admin -->
        <nav class="admin-nav">
            <div class="admin-nav-header">
                <h2>Administration</h2>
                <button id="back-to-display" class="btn btn-secondary">
                    ← Retour à l'affichage
                </button>
            </div>
            
            <ul class="admin-nav-menu">
                <li><a href="#" data-section="dashboard" class="active">Tableau de bord</a></li>
                <li><a href="#" data-section="announcements">Annonces</a></li>
                <li><a href="#" data-section="templates">Templates</a></li>
                <li><a href="#" data-section="schools">Écoles</a></li>
                <li><a href="#" data-section="categories">Catégories</a></li>
                <li><a href="#" data-section="settings">Paramètres</a></li>
            </ul>
            
            <div class="admin-nav-footer">
                <button id="logout-btn" class="btn btn-danger">Déconnexion</button>
            </div>
        </nav>

        <!-- Contenu admin -->
        <div class="admin-content">
            <!-- Dashboard -->
            <section id="dashboard-section" class="admin-section">
                <div class="dashboard-header">
                    <h2>Tableau de bord</h2>
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <h3 id="total-active-announcements">0</h3>
                            <p>Annonces actives</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="total-scheduled-announcements">0</h3>
                            <p>Annonces programmées</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="total-templates">0</h3>
                            <p>Templates</p>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-content">
                    <div class="dashboard-section">
                        <h3>Annonces récentes</h3>
                        <div id="recent-announcements-list"></div>
                    </div>
                    
                    <div class="dashboard-section">
                        <h3>Système</h3>
                        <div class="system-info">
                            <div class="system-item">
                                <span>Dernière mise à jour:</span>
                                <span id="last-update-time"></span>
                            </div>
                            <div class="system-item">
                                <span>Statut d'affichage:</span>
                                <span class="status-badge active">Actif</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gestion des annonces -->
            <section id="announcements-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h2>Gestion des annonces</h2>
                    <button id="create-announcement-btn" class="btn btn-primary">
                        + Nouvelle annonce
                    </button>
                </div>
                
                <!-- Filtres -->
                <div class="filters-bar">
                    <select id="filter-school">
                        <option value="">Toutes les écoles</option>
                    </select>
                    <select id="filter-category">
                        <option value="">Toutes les catégories</option>
                    </select>
                    <select id="filter-status">
                        <option value="">Tous les statuts</option>
                        <option value="active">Actif</option>
                        <option value="scheduled">Programmé</option>
                        <option value="expired">Expiré</option>
                    </select>
                    <button id="apply-filters" class="btn btn-secondary">Appliquer</button>
                </div>
                
                <div class="announcements-list" id="announcements-list">
                    <!-- Les annonces seront chargées ici -->
                </div>
            </section>

            <!-- Gestion des templates -->
            <section id="templates-section" class="admin-section" style="display: none;">
                <div class="templates-header">
                    <h2>Gestion des Templates</h2>
                    <button class="btn btn-primary" id="create-template-btn">
                        + Nouveau Template
                    </button>
                </div>
                
                <div class="templates-list">
                    <h3>Templates Existants</h3>
                    <div class="templates-grid" id="existing-templates">
                        <!-- Templates seront chargés ici -->
                    </div>
                </div>
            </section>

            <!-- Autres sections... -->
            <section id="schools-section" class="admin-section" style="display: none;">
                <h2>Gestion des écoles</h2>
                <p>Configuration des écoles du groupe Emineo</p>
            </section>
            
            <section id="categories-section" class="admin-section" style="display: none;">
                <h2>Gestion des catégories</h2>
                <p>Configuration des catégories d'annonces</p>
            </section>
            
            <section id="settings-section" class="admin-section" style="display: none;">
                <h2>Paramètres système</h2>
                <p>Configuration générale de l'application</p>
            </section>
        </div>
    </div>

    <!-- Modals -->
    <!-- Modal de connexion -->
    <div id="login-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Connexion Administrateur</h3>
                <span class="close" id="close-login-modal">&times;</span>
            </div>
            <form id="login-form" class="modal-body">
                <div class="form-group">
                    <label for="username">Nom d'utilisateur:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Mot de passe:</label>
                    <input type="password" id="password" required>
                </div>
                <div class="form-actions">
                    <button type="button" id="demo-login-btn" class="btn btn-secondary">
                        Connexion démo
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Se connecter
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de création d'annonce -->
    <div id="announcement-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="announcement-modal-title">Nouvelle annonce</h3>
                <span class="close" id="close-announcement-modal">&times;</span>
            </div>
            <form id="announcement-form" class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label for="announcement-title">Titre *</label>
                        <input type="text" id="announcement-title" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="announcement-priority">Priorité *</label>
                        <select id="announcement-priority" name="priority" required>
                            <option value="low">Basse (1)</option>
                            <option value="normal" selected>Normale (2)</option>
                            <option value="high">Élevée (3)</option>
                            <option value="urgent">Urgente (4)</option>
                            <option value="emergency">Urgence (5)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="announcement-content">Contenu *</label>
                    <textarea id="announcement-content" name="content" rows="4" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="announcement-school">École *</label>
                        <select id="announcement-school" name="school" required>
                            <option value="sup-de-vinci">Sup de Vinci</option>
                            <option value="isvm">ISVM</option>
                            <option value="formasup">Formasup</option>
                            <option value="apivet">Apivet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="announcement-category">Catégorie *</label>
                        <select id="announcement-category" name="category" required>
                            <option value="planning">Planning</option>
                            <option value="event">Événement</option>
                            <option value="promo">Vidéo promotionnelle</option>
                            <option value="project">Projet étudiant</option>
                            <option value="info">Information</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="announcement-template">Template</label>
                        <select id="announcement-template" name="template">
                            <option value="basic">Basic</option>
                            <option value="breaking-news">Breaking News</option>
                            <option value="event">Événement</option>
                            <option value="planning">Planning</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="announcement-duration">Durée d'affichage (sec)</label>
                        <input type="number" id="announcement-duration" name="duration" value="10" min="5" max="60">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="announcement-start-date">Date de début</label>
                        <input type="datetime-local" id="announcement-start-date" name="startDate">
                    </div>
                    <div class="form-group">
                        <label for="announcement-end-date">Date de fin</label>
                        <input type="datetime-local" id="announcement-end-date" name="endDate">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" id="cancel-announcement" class="btn btn-secondary">
                        Annuler
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Sauvegarder
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de l'éditeur de template -->
    <div id="template-editor-modal" class="modal">
        <div class="modal-content template-editor-content">
            <div class="modal-header">
                <h3 id="template-editor-title">Créer un Template</h3>
                <span class="close" id="close-template-editor">&times;</span>
            </div>
            
            <div class="template-editor-body">
                <!-- Contenu de l'éditeur -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/display-manager.js"></script>
    <script src="js/announcement-scheduler.js"></script>
    <script src="js/template-renderer.js"></script>
    <script src="js/template-editor.js"></script>
    <script src="js/display-manager.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Initialisation -->
<div class="status-bar">
    <div class="status-progress" id="status-progress"></div>
</div>

    <script>
        // Raccourci clavier pour accéder à l'admin
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                if (window.app) {
                    window.app.toggleAdminPanel();
                }
            }
        });

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', function() {
            window.app = new AnnouncementApp();
        });
    </script>
</body>
</html>
